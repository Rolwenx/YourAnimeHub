<%
const title = anime ? `${anime.TitleEnglish} - YourAnimeHub` : 'YourAnimeHub';
%>

<%- include('../partials/header.ejs', { title: title }) %>

<link type="text/css" rel="stylesheet" href="/css/styleViewAnime.css">
<style>
  .hero:before {
    content: '';
    width: 100%;
    height: 100%;
    position: absolute;
    overflow: hidden;
    top: 0;
    left: 0;
    background: red;
    background: url("<%= anime.BackgroundImageURL %>");
    z-index: -1;
    transform: skewY(-2.2deg);
    transform-origin: 0 0;
  }
</style>


<div class="anime_card">
  
    
    <img src="<%= anime.CoverImageURL %>" alt="cover" class="cover" />
        
    <div class="hero">
      <div class="overlay"></div>
      <div class="details">
      
        <div class="title1"><%= anime.TitleEnglish %></div>
        
      </div> <!-- end details -->
    </div>
</div> <!-- end movie-card -->

<div class="add_like_description_container">
  <div class="add_like_container">
    <button id="add_btn" class="add_btn dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false";>
      Add to List
    </button>
    <ul class="dropdown-menu">
      <li><a class="dropdown-item" href="#">Set as Complete</a></li>
      <li><a class="dropdown-item" href="#">Set as Watching</a></li>
      <li><a class="dropdown-item" href="#">Set as Planning</a></li>
      <li><hr class="dropdown-divider"></li>
      <li><a class="dropdown-item" href="#">Add Manually</a></li>
    </ul>
    <button id="like_btn" class="like_btn" onclick="window.location.href='';">
      <i class="fa fa-thumbs-up"><%= anime.Likes%></i>
    </button>
  </div>
  <div class="description">
    <p style="color:white;"><%= anime.Synopsis %></p>
  </div>
  <!-- Add Review and Propose Edit buttons -->
</div>


<!-- Menus text above the hr -->
<div class="menus">
    <a href="/anime/<%= anime.AnimeID%>/<%= anime.TitleEnglish%>"><p>Overall</p></a>
    <a href="/anime/<%= anime.AnimeID%>/<%= anime.TitleEnglish%>/characters#char"><p>Characters</p></a>
  <a href=""><p>Reviews</p></a>
  <hr class="rounded">
</div>

<div class="anime_page_container">
  
  <div class="left_column">
    <!-- Information about the anime -->
    <div class="anime_info">
      <button class="write_review_button">Write Review</button>
      <button class="propose_edit_button">Propose Edit Request</button>

      <div>
        <p class="title_of_menu"><strong>Format:</strong> </p>
        <p class="answer_of_menu"><%= anime.TypeFormat %></p>
      </div>
      <div>
        <p class="title_of_menu"><strong>Status:</strong> </p>
        <p class="answer_of_menu"><%= anime.AnimeStatus %></p>
      </div>
      <div>
        <p class="title_of_menu"><strong>Number of Episodes:</strong> </p>
        <p class="answer_of_menu"><%= anime.EpisodeCount %></p>
      </div>
      <div>
        <p class="title_of_menu"><strong>Episode Duration:</strong> </p>
        <p class="answer_of_menu"><%= anime.EpisodeDuration %></p>
      </div>
      <div>
        <p class="title_of_menu"><strong>Popularity Position:</strong> </p>
        <p class="answer_of_menu"><%= anime.PopularityPosition %></p>
      </div>
      <div>
        <p class="title_of_menu"><strong>Favourited:</strong> </p>
        <p class="answer_of_menu"><%= anime.Likes %></p>
      </div>
      <div>
        <p class="title_of_menu"><strong>Start Date:</strong> </p>
        <p class="answer_of_menu"><%= anime.ReleaseDate %></p>
      </div>
      <div>
        <p class="title_of_menu"><strong>End Date:</strong> </p>
        <p class="answer_of_menu"><%= anime.EndDate %></p>
      </div>
      <div>
        <p class="title_of_menu"><strong>Genres:</strong> </p>
        <% const genres = anime.Genre.split(','); %>
                    <% genres.forEach(genre => { %>
                      <p class='genres'><%= genre.trim() %></p>
                    <% }); %>
        </div>
      <div>
        <p class="title_of_menu"><strong>English:</strong> </p>
        <p class="answer_of_menu"><%= anime.TitleEnglish %></p>
      </div>
      <div>
        <p class="title_of_menu"><strong>Romaji:</strong> </p>
        <p class="answer_of_menu"><%= anime.TitleRomaji %></p>
      </div>
      <div>
        <p class="title_of_menu"><strong>Native:</strong> </p>
        <p class="answer_of_menu"><%= anime.TitleNative %></p>
      </div>

      <div>
        <p class="title_of_menu"><strong>Streaming Platform:</strong> </p>
        <div class="platform_info">
          <p class="answer_of_menu"> <a style="text-decoration:none; color: #d7d7d7;" href="<%= anime.StreamingPlatformURL %>"> Crunchyroll </p></a>
          <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/0/08/Crunchyroll_Logo.png/857px-Crunchyroll_Logo.png" alt="Streaming Platform Logo" class="platform_logo">
        </div>
      </div>

    </div>

    
  </div>

  <div class="right_column">
   
    <div class="characters_section">
      <a href="">
        <div>
          <h2 class="my_h2 text-light" style="margin-left: 20px !important;">CHARACTERS</h2>
        </div>
      </a>
      <div class="character_grid" id="char">
        <% for (const character of charactersDetails) { %>
            <div class="character_item">
                <a href="/character/<%= character.CharacterID %>/<%= character.CharName %>">
                    <img src="<%= character.ImageURL %>" alt="<%= character.CharName %>">
                    <p style="color: white; font-weight: 600; margin-top: 10px;"><%= character.CharName %></p>
                </a>
            </div>
        <% } %>
    </div>
    
    
    </div>
    
  </div>
</div>



<%- include('../partials/footer.ejs') %>

</body>
</html>
